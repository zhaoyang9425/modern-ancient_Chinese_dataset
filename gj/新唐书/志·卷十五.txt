历一
历法尚矣。自尧命羲、和，历象日月星辰，以闰月定四时成岁，其事略见于 《书》。而夏、商、周以三统改正朔，为历固已不同，而其法不传。至汉造历，始 以八十一分为统母，其数起于黄钟之龠，盖其法一本于律矣。其后刘歆又以《春秋》、 《易象》推合其数，盖傅会之说也。至唐一行始专用大衍之策，则历术又本于《易》 矣。盖历起于数，数者，自然之用也。其用无穷而无所不通，以之于律、于《易》， 皆可以合也。然其要在于候天地之气，以知四时寒暑，而仰察天日月星之行运，以 相参合而已。然四时寒暑无形而运于下，天日月星有象而见于上，二者常动而不息。 一有一无，出入升降，或迟或疾，不相为谋。其久而不能无差忒者，势使之然也。 故为历者，其始未尝不精密，而其后多疏而不合，亦理之然也。不合，则屡变其法 以求之。自尧、舜、三代以来，历未尝同也。
唐终始二百九十余年，而历八改。初曰《戊寅元历》，曰《麟德甲子元历》， 曰《开元大衍历》，曰《宝应五纪历》，曰《建中正元历》，曰《元和观象历》， 曰《长庆宣明历》，曰《景福崇玄历》而止矣。
高祖受禅，将治新历，东都道士傅仁均善推步之学，太史令庾俭、丞傅弈荐之。 诏仁均与俭等参议，合受命岁名为《戊寅元历》。乃列其大要，所可考验者有七， 曰：“唐以戊寅岁甲子日登极，历元戊寅，日起甲子，如汉《太初》，一也。冬至 五十余年辄差一度，日短星昴，合于《尧典》，二也。周幽王六年十月辛卯朔，入 蚀限，合于《诗》，三也。鲁僖公五年壬子冬至，合《春秋命历序》，四也。月有 三大、三小，则日蚀常在朔，月蚀常在望，五也。命辰起子半，命度起虚六，符阴 阳之始，六也。立迟疾定朔，则月行晦不东见，朔不西朓，七也。”高祖诏司历起 二年用之，擢仁均员外散骑侍郎。
三年正月望及二月、八月朔，当蚀，比不效。六年，诏吏部郎中祖孝孙考其得 失。孝孙使算历博士王孝通以《甲辰历》法诘之曰：“‘日短星昴，以正仲冬。’ 七宿毕见，举中宿言耳。举中宿，则余星可知。仁均专守昴中，执文害意，不亦谬 乎？又《月令》仲冬‘昏东壁中’，明昴中非为常准。若尧时星昴昏中，差至东壁， 然则尧前七千余岁，冬至昏翼中，日应在东井。井极北，去人最近，故暑；斗极南， 去人最远，故寒。寒暑易位，必不然矣。又平朔、定朔，旧有二家。三大、三小， 为定朔望；一大、一小，为平朔望。日月行有迟速，相及谓之合会。晦、朔无定， 由时消息。若定大小皆在朔者，合会虽定，而蔀、元、纪首三端并失。若上合履端 之始，下得归馀于终，合会有时，则《甲辰元历》为通术矣。”仁均对曰：“宋祖 冲之立岁差，隋张胄玄等因而修之。虽差数不同，各明其意。孝通未晓，乃热南斗 为冬至常星。夫日躔宿度，如垂阝传之过，宿度既差，黄道随而变矣。《书》云： ‘季秋月朔，辰弗集于房。’孔氏云：‘集，合也。不合则日蚀可知。’又云： ‘先时者杀无赦，不及时者杀无赦。’既有先后之差，是知定朔矣。《诗》云： ‘十月之交，朔月辛卯。’又《春秋传》曰：‘不书朔，官失之也。’自后历差， 莫能详正。故秦、汉以来，多非朔蚀。宋御史中丞何承天微欲见意，不能详究，乃 为散骑侍郎皮延宗等所抑。孝通之语，乃延宗旧说。治历之本，必推上元，日月如 合璧，五星如连珠，夜半甲子朔旦冬至。自此七曜散行，不复余分普尽，总会如初。 唯朔分、气分，有可尽之理，因其可尽，即有三端。此乃纪其日数之元尔。或以为 即夜半甲子朔冬至者，非也。冬至自有常数，朔名由于月起，月行迟疾匪常，三端 安得即合。故必须日月相合与至同日者，乃为合朔冬至耳。”孝孙以为然，但略去 尤疏阔者。
九年，复诏大理卿崔善为与孝通等较定，善为所改凡数十条。初，仁均以武德 元年为历始，而气、朔、迟疾、交会及五星皆有加减。至是复用上元积算。其周天 度，即古赤道也。
贞观初，直太史李淳风又上疏论十有八事，复诏善为课二家得失，其七条改从 淳风。十四年，太宗将亲祀南郊，以十一月癸亥朔，甲子冬至。而淳风新术，以甲 子合朔冬至，乃上言：“古历分日，起于子半。十一月当甲子合朔冬至，故太史令 傅仁均以减余稍多，子初为朔，遂差三刻。”司历南宫子明、太史令薛颐等言： “子初及半，日月未离。淳风之法，较春秋已来晷度薄蚀，事皆符合。”国子祭酒 孔颖达等及尚书八座参议，请从淳风。又以平朔推之，则二历皆以朔日冬至，于事 弥合。且平朔行之自古，故《春秋传》或失之前，谓晦日也。虽癸亥日月相及，明 日甲子，为朔可也。从之。十八年，淳风又上言：“仁均历有三大、三小，云日月 之蚀，必在朔望。十九年九月后，四朔频大。”诏集诸解历者详之，不能定。庚子， 诏用仁均平朔，讫麟德元年。
仁均历法祖述胄玄，稍以刘孝孙旧议参之，其大最疏于淳风。然更相出入，其 有所中，淳风亦不能逾之。今所记者，善为所较也。
《戊寅历》上元戊寅岁至武德九年丙戌，积十六万四千三百四十八算外。
章岁六百七十六。亦名行分法。章闰二百四十九。章月八千三百六十一。
月法三十八万四千七十五。日法万三千六。时法六千五百三度法、气法九千四 百六十四气时法千一百八十三。
岁分三百四十五万六千六百七十五。岁余二千三百一十五。周分三百四十五万 六千八百四十五半。斗分一千四百八十五半。没分七万六千八百一十五。没法千一 百三。
历日二十七，历余万六千六十四。历周七十九万八千二百。历法二万八千九百 六十八。余数四万九千六百三十五。
章月乘年，如章岁得一，为积月。以月法乘积月，如日法得一，为朔积日；余 为小余。
日满六十，去之；余为大余。命甲子算外，得天正平朔。加大余二十九、小余 六千九百一，得次朔。加平朔大余七、小余四千九百七十六、小分四之三，为上弦。 又加，得望。又加，得下弦。余数乘年，如气法得一，为气积日。命日如前，得冬 至。加大余十五、小余二千六十八、小分八之一，得次气日。加四季之节大余十二、 小余千六百五十四、小分四，得土王。凡节气小余，三之，以气时法而一，命子半 算外，各其加时。置冬至小余，八之，减没分，余满没法为日。加冬至去朔日算， 依月大小去之，日不满月算，得没日。余分尽为减。加日六十九、余七百八，得次 没。
以平朔、弦、望入气日算乘损益率，如十五得一，以损益盈缩数，为定盈缩分。 凡不尽半法已上亦从一。以历法乘朔积日，满历周去之；余如历法得一，为日。命 日算外，得天正平朔夜半入历日及余。次日加一，累而裁之。若以万四千四百八十 四乘平朔小余，如六千五百三而一，不尽，为小分，以加夜半入历日。加之满历日 及余，去之，得平朔加时所入，加历日七、余万一千八十四、小分三千九百九十五， 命如前，得上弦。又加，得望、下弦及后朔。
历行分与次日相减，为行差，后多为进，后少为退。减去行分六百七十六，为 差法。各置平朔、弦、望加时入历日余，乘所入日损益率，以损益其下积分，差法 除，为定盈缩积分。置平朔、弦、望小余，各以入气积分盈加、缩减之，以入历积 分盈减、缩加之，满若不足、进退日法，皆为定大小余，命日甲子算外。以岁分乘 年为积分，满周分去之；余如度法得一，为度。命以虚六，经斗去分，得冬至日度 及分。以冬至去朔日算及分减之，得天正平朔前夜半日度及分。以小分法十四约度 分为行分。凡小分满法成行分，行分满法成度。若注历，又以二十六约行分。月星 准此。斗分百七十七，小分七半。累加一度，得次日。以行分法乘朔、望定小余， 以九百二十九除为度分，又以十四约为行分。以加夜半度，为朔、望加时日度。定 朔加时，日月同度。望则因加日度百八十二、行分四百二十六、小分十太。以夜半 入历日余乘行差，满历法得一，以进加、退减历行分，为行定分。以朔定小余乘之， 满日法得一，为行分。以减加时月度，为朔、望夜半月度。求次日，加月行定分， 累之。
○岁星
率三百七十七万五千二十三。
终日三百九十八，行分五百九十六，小分七。
平见，入冬至初日，减行分五千四百一十一。自后日损所减百二十分。立春初， 日增所加六十分。春分，均加四日。清明毕谷雨，均加五日。立夏毕大暑，均加六 日。立秋初日，加四千八十分。乃日损所加六十七分。入寒露，日增所减百一十七 分。入小雪，毕大雪，均减八日。
初见，顺，日行百七十一分，日益迟一分，百一十四日行十九度二百九分。而 留，二十六日。乃退，日九十七分，八十四日退十二度三十六分。又留，二十五日 五百九十六分，小分七。凡五星留日有分者，以初定见日分加之。若满行分法，去 之，又增一日。乃顺，初日行六十分，日益疾一分，百一十四日行十九度四百三十 七分。而伏。
○荧惑
率七百三十八万一千二百二十三。
终日七百七十九，行分六百二十六，小分三。
平见，入冬至初日，减万六千三百五十四分。乃日损所减五百四十五分。入大 寒，日增所加四百二十六分。入雨水后，均加二十九日。立夏初日，加万九千三百 九十二分。乃日损所加二百一十三分。入立秋初，依平。入处暑，日增所减百八十 四分。入小雪后，均减二十五日。
初见，入冬至，初率二百四十一日行百六十三度。自后二日损日度各一，自百 二十八日，率百七十七日行九十九度，毕百六十一日。又三日损一，尽百八十二日， 率百七十日行九十二度，毕百八十八日。乃三日益一，尽二百二十七日，率百八十 三日行百五度。又二日益一，尽二百四十九日，率百九十四日行百一十六度。又每 日益一，尽二百一十日，率二百五十五日行百七十七度，毕三百三十七日。乃二日 损一，尽大雪，复初见。入小寒后，三日去日率一。入雨水，毕立夏，均去日率二 十。自后三日减所去一日，毕小暑，依平，为定日率。若入处暑，毕秋分，皆去度 率六。各依冬至后日数而损益之，又依所入之气以减之，为前疾日度率。若初行入 大寒，毕大暑，皆差行，日益迟一分；其余皆平行。若入白露，毕秋分，初迟，日 行半度，四十日行二十度。即去日率四十、度率二十，别为半度之。行讫，然后求 平行分，续之。以行分法乘度定率，如日定率而一，为平行分。不尽，为小分。求 差行者，减日率一，又半之，加平行分，为初日行分。各尽其日度而迟。初日行三 百二十六分，日益迟一分半，六十日行二十五度五分。其前疾去度六者，行三十一 度五分。此迟初日加六十七分、小分六十分之三十六。
而留，十三日。前疾去日者，分日于二留，奇从后留。乃退，日百九十二分， 六十日退十七度二十八分。又留，十二日六百二十六分，小分三。
又顺。后迟，初日行二百三十八分，日益疾一分半，六十日行二十五度三十五 分。此迟在立秋至秋分者，加六度，行三十一度三十五分。此迟初日加行分六十七、 小分六十分之三十六。而后疾。入冬至，初率二百一十四日行百三十六度。乃每日 损一，尽三十七日，率百七十七日行九十九度。又二日损一，尽五十七日，率百六 十七日行八十九度，毕七十九日。又三日益一，尽百三十日，率百八十四日行百六 度。又二日益一，尽百四十四日，率百九十一日行百一十三度。又每日益一，尽百 九十日，率二百三十七日行百五十九度。又每日益二，尽二百日，率二百五十七日 行百七十九度。又每日益一，尽二百一十日，率二百六十七日行百八十九度，毕二 百五十九日。乃二日损一，毕大雪，复初。后迟加六度者，此后疾去度率六，为定。 各依冬至后日数而损益之，为后疾日度率。若入立夏，毕夏至，日行半度，尽六十 日，行三十度。若入小暑，毕大暑，尽四十日，行二十度皆去日度率，别为半度之。 行讫，然后求平行分，续之。各尽其日度而伏。
○镇星
率三百五十七万八千二百四十六。
终日三百七十八，行分六十一。
平见，入冬至初日，减四千八百一十四分。乃日增所减七十九分。入小寒，均 减九日。乃每气损所减一日。入夏至初日，均减二日。自后十日损所减一日。小暑 五日外，依平。入大暑，日增所加百八十一分。入处暑，均加九日。入白露初日， 加六千二分。乃日损所加百三十三分。入霜降，日增所减七十九分。
初见，顺，日行六十分，八十三日行七度二百四十八分。而留，三十八日。乃 退，日四十一分，百日退六度四十四分。又留，三十七日六十一分。乃顺，日行六 十分，八十三日行七度二百四十八分而伏。
○太白
率五百五十二万六千二百。
终日五百八十三，行分六百二十，小分八。
晨见伏三百二十七日，行分六百二十，小分八。
夕见伏二百五十六日。
晨平见，入冬至，依平。入小寒，日增所加六十六分。入立春，毕立夏，均加 三日。小满初日，加千九百六十四分。乃日损所加六十分。入夏至，依平。入小暑， 日增所减六十分。入立秋，毕立冬，均减三日。小雪初日，减千九百六十四分。乃 日损所减六十六分。
初见，乃退，日半度，十日退五度。而留，九日。乃顺，迟，差行，日益疾八 分，四十日行三十度。入大雪毕小满者，依此。入芒种，十日减一度。入小暑，毕 霜降，均减三度。入立冬，十日损所减一度，毕小雪。皆为定度。以行分法乘定度， 四十除，为平行分。又以四乘三十九，以减平行，为初日行分。平行，日一度，十 五日行十五度。入小寒，十日益日度各一。入雨水后，皆二十一日行二十一度。入 春分后，十日减一。毕立夏，依平。入小满后，六日减一。毕立秋，日度皆尽，无 平行。入霜降后，四日加一。毕大雪，依平。疾，百七十日行二百四度。前顺迟减 度者，计所减之数，以益此度为定。而晨伏。
夕平见，入冬至，日增所减百分。入启蛰，毕春分，均减九日。清明初日，减 五千九百八十六分。乃日损所减百分。入芒种，依平。入夏至，日增所加百分。入 处暑，毕秋分，均加九日。寒露初日，加五千九百八十六分。乃日损所减百分。入 大雪，依平。
初见，顺疾，百七十日行二百四度。入冬至毕立夏者，依此。入小满，六日加 一度。入夏至，毕小暑，均加五度。入大暑，三日减一度。入立秋，毕大雪，依平。 从白露毕春分，皆差行，日益疾一分半。以一分半乘百六十九而半之，以加平行， 为初日行分。入清明，毕于处暑，毕平行。乃平行，日一度，十五日行十五度。入 冬至后，十日减日度各一。入启蛰，毕芒种，皆九日行九度。入夏至后，五日益一。 入大暑，依平。入立秋后，六日加一。毕秋分，二十五日行二十五度。入寒露，六 日减一。入大雪，依平。顺迟，日益迟八分，四十日行三十度。前加度者，此依数 减之。又留，九日。乃退，日半度，十日退五度。而夕伏。
○辰星
率百九万六千六百八十三
终日百一十五，行分五百九十四，小分七。
晨见伏六十三日，行分五百九十四，小分七。
夕见伏五十二日。
晨平见，入冬至，均减四日。入小寒，依平。入立春后，均减三日。入雨水， 毕立夏，应见不见。其在启蛰、立夏气内，去日十八度外、三十六度内，晨有木、 火、土、金一星者，亦见。入小满，依平。入霜降，毕立冬，均加一日。入小雪， 至大雪十二日，依平。若在大雪十三日后，日增所减一日。
初见，留，六日。顺迟，日行百六十九分。入大寒，毕启蛰，无此迟行。乃平 行，日一度，十日行十度。入大寒后，二日去日度各一，毕于二十日，日度俱尽， 无此平行。疾，日行一度六百九分，十日行十九度六分。前无迟行者，此疾日减二 百三分，十日行十六度四分。而晨伏。
夕平见，入冬至后，依平。入谷雨，毕芒种，均减二日。入夏至，依平。入立 秋，毕霜降，应见不见。其在立秋、霜降气内，夕有星去日如前者，亦见。入立冬， 毕大雪，依平。
初见，顺疾，日行一度六百九分，十日行十九度六分。若入小暑，毕处暑，日 减二百三分。乃平行，日一度，十日行十度。入大暑后，二日去日及度各一，毕于 二十日，日度俱尽，无此平行。迟，日行百六十九分。若疾减二百三分者，即不须 此迟行。又留，六日七分。而夕伏。
各以星率去岁积分，余反以减其率，余如度法得一为日，得冬至后晨平见日及 分。以冬至去朔日算及分加之，起天正，依月大小计之，命日算外，得所在日月。 金、水各以晨见伏日及分加之，得夕平见。各以其星初日所加减之分，计后日损益 之数以损益之。讫，乃以加减平见为定见。其加减分皆满行分法为日。以定见去朔 日及分加其朔前夜半日度，又以星初见去日度，岁星十四，太白十一，荧惑、镇星、 辰星皆十七，晨减、夕加之，得初见宿度。求次日，各加一日所行度及分。荧惑、 太白有小分者，各以日率为母。其行有益疾迟者，副置一日行分，各以其差疾益、 迟损，乃加之。留者因前，退则依减，伏不注度。顺行出斗，去其分；退行入斗， 先加分。讫，皆以二十六约行分，为度分。
交会法千二百七十四万一千二百五八分。交分法六百三十七万六百二九分。
朔差百八万五千四百九十四二分。望分六百九十一万三千三百五十。交限五百 八十二万七千八百五十五八分。望差五十四万二千七百四十七一分。
外限六百七十六万七百八十二九分。中限千二百三十五万一千二十五八分。内 限千二百一十九万一千四百五十八七分。
以朔差乘积月，满交会法去之；余得天正月朔入平交分。求望，以望分加之。 求次月，以朔差加之。其朔望，入大雪，毕冬至，依平。入小寒，日加气差千六百 五十分。入启蛰，毕清明，均加七万六千一百分。自后日损所加千六百五十分。入 芒种，毕夏至，依平。加之满法，去之。若朔交入小寒毕雨水，及立夏毕小满，值 盈二时已下，皆半气差加之。二时已上则否。如望差已下、外限已上有星伏，木、 土去见十日外，火去见四十日外，金晨伏去见二十二日外，有一星者，不加气差。 入小暑后，日增所减千二百分。入白露，毕霜降，均减九万五千八百二十五分。立 冬初日，减六万三千三百分，自后日损所减二千一百一十分。减若不足，加法，乃 减之，余为定交分。朔入交分，如交限内限已上、交分中限已下有星伏如前者，不 减。不满交分法者，为在外道；满去之，余为在内道。如望差已下，为去先交分， 交限已上，以减交分，余为去后交分。皆三日法约，为时数。望则月蚀，朔在内道 则日蚀。虽在外道，去交近，亦蚀。在内道，去交远，亦不蚀。
置蚀望定小余。入历一日，减二百八十；若十五日，即加之；十四日，加五百 五十；若二十八日，即减之；余日皆盈加、缩减二百八十：为月蚀定余。十二乘之， 时法而一，命子半算外；不尽，得月蚀加时。约定小余如夜漏半已下者，退日算上。
置蚀朔定小余。入历一日，即减二百八十；若十五日，即加之；十四日，加五 百五十；若二十八日，即减之；为定。后不入四时加减之限。其内道，春，去交四 时已上入历，盈加、缩减二百八十；夏，盈加、缩减二百八十；秋，去交十一时已 下，惟盈加二百八十，已上者，盈加五百五十，缩加二百八十；冬，去交五时已下， 惟盈加二百八十：皆为定余。十二乘之，时法而一，命子半算外；不尽，为时余， 副之。仲辰半前，以副减法为差率；半后，退半辰，以法加余，以副为差率。季辰 半前，以法加副为差率；半后，退半辰，以法加余，倍法加副，为差率。孟辰半前， 三因其法，以副减之，余为差率；半后，退半辰，以法加余，又以法加副，乃三因 其法，以副减之，为差率。又置去交时数，三已下，加三；六已下，加二；九已下， 加一；九已上，依数；十二已上，从十二。若季辰半后，孟辰半前，去交六时已上 者，皆从其六。六时已下，依数不加。皆乘差率，十四除，为时差。子午半后，以 加时余；卯酉半后，以减时余；加之满若不足，进退时法：孟谓寅、巳、申，仲谓 午、卯、酉，季谓辰、未、戌。得日蚀加时。
望去交分，冬先后交，皆去二时；春先交，秋后交，去半时；春后交，秋先交， 去二时；夏则依定。不足去者，既。乃以三万六千一百八十三为法而一，以减十五， 余为月蚀分。
朔去交，在内道，五月朔，加时在南方，先交十三时外；六月朔，后交十三时 外者，不蚀。启蛰毕清明，先交十三时外，值缩，加时在未西；处暑毕寒露，后交 十三时外，值盈，加时在巳东，皆不蚀。交在外道，先后去交一时内者，皆蚀。若 二时内，及先交值盈、后交值缩二时外者，亦蚀。夏去交二时内，加时在南方者， 亦蚀。若去分、至十二时内，去交六时内者，亦蚀。若去春分三日内，后交二时； 秋分三日内，先交二时内者，亦蚀。诸去交三时内有星伏，土、木去见十日外，火 去见四十日外，金晨伏去见二十二日外，有一星者，不蚀。各置去交分。秋分后， 毕立春，均减二十二万八百分。启蛰初日，毕芒种，日损所减千八百一十分。夏至 后，毕白露，日增所减二千四百分。以减去交分，余为不蚀分。不足减，反相减为 不蚀分。亦以减望差为定法。后交值缩者，直以望差为定法。其不蚀分，大寒毕立 春，后交五时外，皆去一时。时差值减者，先交减之，后交加之。时差值加者，先 交加之，后交减之。不足减者，皆既。十五乘之，定法而一，以减十五，余为日蚀 分。
置日月蚀分，四已下，因增二；五已下，因增三；六已上，因增五；各为刻率， 副之。以乘所入历损益率，四千五十七为法而一。值盈，反其损益；值缩，依其损 益。皆损益其副，为定用刻。乃六乘之，十而一，以减蚀甚辰刻，为亏初。又四乘 之，十而一。以加食甚辰刻，为复满。
